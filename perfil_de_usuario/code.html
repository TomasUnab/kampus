<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800" onload="this.rel='stylesheet'" rel="stylesheet"/>
<title>Kampus - Perfil de Usuario</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>

<!-- Scripts del Sistema KAMPUS -->
<script src="../js/session-manager.js"></script>
<script src="../js/cache-manager.js"></script>
<script src="../js/notification-system.js"></script>
<script src="../js/performance-optimizer.js"></script>
<script src="../js/moderation-system.js"></script>
<script src="../js/kampus-init.js"></script>
<script src="../js/header-sync.js"></script>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link rel="stylesheet" href="../css/responsive.css">
<link rel="stylesheet" href="../fix-mobile.css">
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#13a4ec",
              "background-light": "#f6f7f8",
              "background-dark": "#101c22",
            },
            fontFamily: {
              display: ["Plus Jakarta Sans"],
            },
            borderRadius: { DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px" },
          },
        },
      };
    </script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200">
<div class="flex flex-col min-h-screen">
<header class="sticky top-0 z-10 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700">
<div class="container mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex items-center justify-between h-16">
<div class="flex items-center gap-2 text-primary">
<svg class="h-8 w-8" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24C44 26.7382 39.8386 29.123 33.69 30.3636C39.8386 31.6043 44 33.9891 44 36.7273C44 40.7439 35.0457 44 24 44C12.9543 44 4 40.7439 4 36.7273C4 33.9891 8.16144 31.6043 14.31 30.3636C8.16144 29.123 4 26.7382 4 24C4 21.2618 8.16144 18.877 14.31 17.6364C8.16144 16.3957 4 14.0109 4 11.2727C4 7.25611 12.9543 4 24 4C35.0457 4 44 7.25611 44 11.2727Z" fill="currentColor"></path>
</svg>
<h1 class="text-2xl font-bold text-gray-900 dark:text-white">Kampus</h1>
</div>

<nav class="hidden md:flex items-center gap-6">
<a class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors" href="../dashboard_principal/code.html">Inicio</a>
<a class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors" href="../resultados_de_b√∫squeda/code.html">Explorar</a>
<a class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors" href="../mis_materiales/code.html">Mis materiales</a>
<a class="text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary transition-colors" href="../planes/code.html">Planes</a>
</nav>

<!-- Bot√≥n men√∫ m√≥vil -->
<button class="md:hidden p-2 text-gray-600 dark:text-gray-300" onclick="toggleMobileMenu()">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
</svg>
</button>

<div class="hidden md:flex items-center gap-4">
<div class="relative">
<button class="notification-button relative rounded-full p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
<span class="material-symbols-outlined">notifications</span>
<span class="absolute top-1 right-1 flex h-2 w-2">
<span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
<span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
</span>
</button>
<div class="notification-dropdown hidden absolute right-0 top-12 w-80 bg-white dark:bg-background-dark rounded-lg shadow-xl border border-black/10 dark:border-white/10 overflow-hidden z-50">
<div class="px-4 py-3 border-b border-black/10 dark:border-white/10">
<h3 class="text-sm font-semibold text-black dark:text-white">Notificaciones</h3>
</div>
<div class="max-h-96 overflow-y-auto">
<div class="notification-item px-4 py-3 hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer border-b border-black/5 dark:border-white/5">
<div class="flex gap-3">
<div class="size-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
<span class="text-primary text-xs">‚òÖ</span>
</div>
<div class="flex-1 min-w-0">
<p class="text-sm text-black dark:text-white font-medium">Nueva valoraci√≥n</p>
<p class="text-xs text-black/60 dark:text-white/60 truncate">Juan P√©rez calific√≥ tu material "Apuntes de C√°lculo II" con 5 estrellas</p>
<p class="text-xs text-black/40 dark:text-white/40 mt-1">Hace 2 horas</p>
</div>
</div>
</div>
<div class="notification-item px-4 py-3 hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer border-b border-black/5 dark:border-white/5">
<div class="flex gap-3">
<div class="size-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
<span class="text-primary text-xs">üí¨</span>
</div>
<div class="flex-1 min-w-0">
<p class="text-sm text-black dark:text-white font-medium">Nuevo comentario</p>
<p class="text-xs text-black/60 dark:text-white/60 truncate">Mar√≠a Gonz√°lez coment√≥ en "Gu√≠a de ejercicios de F√≠sica I"</p>
<p class="text-xs text-black/40 dark:text-white/40 mt-1">Hace 5 horas</p>
</div>
</div>
</div>
<div class="notification-item px-4 py-3 hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer border-b border-black/5 dark:border-white/5">
<div class="flex gap-3">
<div class="size-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
<span class="text-primary text-xs">üì•</span>
</div>
<div class="flex-1 min-w-0">
<p class="text-sm text-black dark:text-white font-medium">Material descargado</p>
<p class="text-xs text-black/60 dark:text-white/60 truncate">Tu material "Resumen de Historia" fue descargado 10 veces hoy</p>
<p class="text-xs text-black/40 dark:text-white/40 mt-1">Hace 1 d√≠a</p>
</div>
</div>
</div>
<div class="notification-item px-4 py-3 hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer">
<div class="flex gap-3">
<div class="size-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
<span class="text-primary text-xs">üèÜ</span>
</div>
<div class="flex-1 min-w-0">
<p class="text-sm text-black dark:text-white font-medium">Nuevo logro desbloqueado</p>
<p class="text-xs text-black/60 dark:text-white/60 truncate">Has alcanzado 100 puntos de reputaci√≥n</p>
<p class="text-xs text-black/40 dark:text-white/40 mt-1">Hace 2 d√≠as</p>
</div>
</div>
</div>
</div>
<div class="px-4 py-3 border-t border-black/10 dark:border-white/10 text-center">
<a href="#" class="text-xs text-primary hover:text-primary/80 font-medium">Ver todas las notificaciones</a>
</div>
</div>
</div>

<!-- Bot√≥n de Moderaci√≥n (solo visible para admins/moderadores) -->
<a id="moderation-link" href="../dashboard_moderacion.html" class="hidden text-sm font-bold bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700 text-white px-4 py-2 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2">
<span class="material-symbols-outlined text-lg">shield</span>
<span class="hidden lg:inline">Panel de Moderaci√≥n</span>
</a>

<!-- Badge de Rol -->
<div id="role-badge" class="hidden"></div>

<!-- Avatar sincronizado con el perfil -->
<div data-header-avatar class="w-10 h-10 rounded-full bg-cover bg-center" style='background-image: url("https://i.pravatar.cc/150?img=9");'></div>
</div>

<!-- Men√∫ m√≥vil -->
<div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
<div class="px-4 py-2 space-y-1">
<a class="block px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-primary" href="../dashboard_principal/code.html">Inicio</a>
<a class="block px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-primary" href="../resultados_de_b√∫squeda/code.html">Explorar</a>
<a class="block px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-primary" href="../mis_materiales/code.html">Mis materiales</a>
<a class="block px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-primary" href="../planes/code.html">Planes</a>
</div>
</div>

</div>
</div>
</header>
<main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
<div class="max-w-5xl mx-auto">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg overflow-hidden">
<!-- Banner superior con gradiente mejorado -->
<div class="h-24 sm:h-32 bg-gradient-to-br from-primary via-primary-dark to-purple-600 relative overflow-hidden">
  <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRjMC0yLjIxLTEuNzktNC00LTRzLTQgMS43OS00IDQgMS43OSA0IDQgNCA0LTEuNzkgNC00em0wLTEwYzAtMi4yMS0xLjc5LTQtNC00cy00IDEuNzktNCA0IDEuNzkgNCA0IDQgNC0xLjc5IDQtNHoiLz48L2c+PC9nPjwvc3ZnPg==')] opacity-20"></div>
  
  <!-- Informaci√≥n en el banner - M√≥vil -->
  <div class="absolute bottom-4 left-0 right-0 px-6 sm:px-8 flex md:hidden items-center justify-center gap-4 flex-wrap">
    <div class="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-lg">
      <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
      </svg>
      <span data-banner-career class="text-white text-sm font-medium">Ingenier√≠a Civil</span>
    </div>
    <div class="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-lg">
      <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
      </svg>
      <span data-banner-university class="text-white text-sm font-medium">Universidad de Chile</span>
    </div>
  </div>
</div>

<div class="px-6 py-6 sm:px-8 -mt-12 lg:-mt-10">
  <div class="flex flex-col lg:flex-row items-center lg:items-center gap-6 lg:gap-8">
    
    <!-- Avatar mejorado -->
    <div class="relative group self-center lg:self-start flex-shrink-0">
      <div data-profile-avatar 
           class="bg-center bg-no-repeat aspect-square bg-cover rounded-2xl h-36 w-36 sm:h-40 sm:w-40 border-4 border-white dark:border-gray-800 shadow-xl transition-all duration-300 group-hover:scale-105 group-hover:shadow-2xl group-hover:rotate-2" 
           style='background-image: url("https://i.pravatar.cc/150?img=9");'>
      </div>
      <!-- Bot√≥n de editar perfil -->
      <button onclick="openEditProfileModal()" class="absolute -bottom-2 -right-2 bg-primary hover:bg-primary-dark text-white rounded-full p-2.5 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
        </svg>
      </button>
    </div>
    
    <!-- Informaci√≥n del perfil -->
    <div class="flex-1 text-center lg:text-left w-full">
      
      <!-- Nombre - SIEMPRE VISIBLE -->
      <div class="mt-8 lg:mt-0 mb-3 px-2">
        <h2 data-profile-name class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white text-center lg:text-left">
          Sofia Rodriguez
        </h2>
      </div>
      
      <!-- Badges de carrera y universidad - Visible en desktop y tablet, oculto en m√≥vil -->
      <div class="hidden sm:flex flex-wrap items-center justify-center lg:justify-start gap-2 mb-4">
        <div class="flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
          </svg>
          <span data-profile-career>Ingenier√≠a Civil</span>
        </div>
        <div class="flex items-center gap-2 px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg text-sm font-medium">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
          </svg>
          <span data-profile-university>Universidad de Chile</span>
        </div>
      </div>
      
      <!-- Biograf√≠a -->
      <div id="profile-bio" class="text-sm text-gray-600 dark:text-gray-400 max-w-2xl mb-4 mx-auto lg:mx-0">
        <p class="italic">"Estudiante apasionada por las matem√°ticas y la f√≠sica. Me encanta compartir conocimiento."</p>
      </div>
      
      <!-- Redes sociales -->
      <div id="profile-social" class="flex items-center justify-center lg:justify-start gap-2 flex-wrap"></div>
      
    </div>
    
  </div>
</div>
<div class="border-t border-gray-200 dark:border-gray-700 mt-4">
<nav class="flex justify-center sm:justify-start -mb-px px-6 sm:px-8 space-x-8">
<button class="profile-tab whitespace-nowrap py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 dark:text-gray-400 hover:text-primary hover:border-primary" data-tab="favoritos">Favoritos</button>
<button class="profile-tab whitespace-nowrap py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 dark:text-gray-400 hover:text-primary hover:border-primary" data-tab="contribuciones">Contribuciones</button>
<button class="profile-tab active whitespace-nowrap py-4 px-1 border-b-2 border-primary font-medium text-sm text-primary" data-tab="reputacion">Reputaci√≥n</button>
<button class="profile-tab whitespace-nowrap py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 dark:text-gray-400 hover:text-primary hover:border-primary" data-tab="descargas">Descargas</button>
<button class="profile-tab whitespace-nowrap py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 dark:text-gray-400 hover:text-primary hover:border-primary" data-tab="calificaciones">Calificaciones</button>
</nav>
</div>
</div>
<div class="mt-8">
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
<div class="lg:col-span-2">

<div id="tab-favoritos" class="tab-content-profile hidden">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Materiales Favoritos</h3>
<div class="space-y-4">
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDRRhN9nq8mJj5iGTLrXUpWBECITiV7INmwvNMmVSE5PCJdOWS7pfTBvUL0qYQtlApedC0U2GgDw4CvVmBnbcQi4iJPB86Vw1o5l3Q8pJIrQtTgtoLf2-ahl1t9QqhlkpS7w6QFkWCgXC2YgeTX0MKWo_Kq_3nZU9_NzLzG6rcqLRFfhmmpoWhEMTNI6cEIuSxkB6m0o-4wmTYVIBTSTptd8pyPK2m9fKVgNyFYuo_KSR8DzwQKviKasOwnRydFDAxEHSeY-tLfkZk");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Apuntes de Programaci√≥n Avanzada</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Por: Prof. Carlos ‚Ä¢ 250 descargas</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.9</span>
</div>
</div>
</div>
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDZmKYCyFmviktFNuL2P3pTlNn3UOznTfEbiwEYkE6eXmsRvKUijqyp-auhC5MzH8vo9dJdYPuZuXp8pPbdot7iOVz3Va_7sPcxikEHbRSfforp_Iq_nKmayr3AjnLlOtsr9zfh2hreyRfKrwBX4HSMpQaf1gd3tjaSQtzUQLhZRHnyUNSakx5uXut2xxW2X0-3vR9gZ3fWrJaUJ2sFmxWkpRR53NFVhV_hQIanXX-tzgFMePGt4H3qmuOHo40rvgYg-lS6HAbQIsI");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Gu√≠a de √Ålgebra Lineal</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Por: Sof√≠a R. ‚Ä¢ 189 descargas</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.7</span>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="tab-contribuciones" class="tab-content-profile hidden">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Mis Contribuciones</h3>
<div class="space-y-4">
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCDHxul7Nx10gzwdf5y7ENZQ3eI1HxZlopUqO88FlQasy7raPpXiNif_M5qtDrduWt925GFL9Hp4jrzAqGgTzKXRIdHI88kf6NNW_0i-JmNmTprY5aJKneuGrSgbOI-wspxpHZWWCT9sj0mADM1hz26FvHPntne4MDcbpCjBxJK84R9w-BPKw_-DTPzVstXPBwMHjSFxqakWElWtv1A8sEV8HYyqMFXUNpUZwGJQcGF4I_EEdSLPhymlVvdJyi058GGhGcJ9Oit_wI");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Apuntes de C√°lculo II</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Subido hace 2 semanas ‚Ä¢ 245 descargas</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.5</span>
</div>
</div>
</div>
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAFCZILSJEr3cfdpN96FJEbquKtmh5xOGJoJsRTS8YBcnF8PTGEvS5h_UmoyoFxI890Qs2kkGIWd-yyRgKQLZb2-fi8pe1Qt3b8sMnVBfXMYw-QjECEZlF66cLk_kmKWpS6kmZtMtp6IwuiX9DUuPA9t1wy8ub0o1AOGG3xrU20NPne5WxFRvBcNwqja6qupzDa3TFkX2tUNpX6QP0MF0WNjzxD7Mbm4ti8v8F-_uJVOdYiFSpZGSIiZrRkNsn9yYMEhq3tzKXiHn8");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Gu√≠a de F√≠sica I</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Subido hace 1 mes ‚Ä¢ 182 descargas</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.8</span>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="tab-reputacion" class="tab-content-profile">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Insignias Obtenidas</h3>
<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
<div class="flex flex-col items-center text-center group">
<div class="w-24 h-24 bg-cover bg-center rounded-lg transition-transform duration-300 group-hover:scale-105" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB5ZFzmdKtSrx5Y4rD61vTeV4DaV9iEKUUgN2RdturRfVuPZEWN4YqQJ6ct-Va2FoBDvBYQQqDTyXaY2GP1fuifHFOzmoDEiWCva_UF6bOmBQR8nQs6AzNML2zuH13md4aHucGDjOLpl7pr1ktZKk44m3yNKQJ9C-7s1SHwfmSC5RgRAq_El22pdPckB7TNKe5aUxP3PjSywdYrzWho32H7SyRkS1iBRN5gBMFp6k4lIOXckja-nJjxMh3ybCv6om1pS1Ly_JwTsXk");'></div>
<p class="mt-2 text-sm font-semibold text-gray-700 dark:text-gray-300">Colaborador Estrella</p>
</div>
<div class="flex flex-col items-center text-center group">
<div class="w-24 h-24 bg-cover bg-center rounded-lg transition-transform duration-300 group-hover:scale-105" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBdM72Q9BsBt-zs_pg4kueS8IFZqY7I1pSPOYJe7YRddzcpnWBDdaHw7RyMZH4yYhmq5nknYyWC2-2CiD4pigxTPCJvj9OTl174P9vNYoZu-fP6wpWk8jgh2BAZSma08EUo0jwNXDaQRY0u8-i8OHcsN6kq2GiLWdfn9dxPoj5SQYBnceozT9XGrrEgCX2L0ir4QnuvWznecSEbcZJAK4g2JGOG7q5DRnmns4M8oWY_zzLf9bhKXxC_mFGxzA5JWpzoKes4H8yepDU");'></div>
<p class="mt-2 text-sm font-semibold text-gray-700 dark:text-gray-300">Mente Brillante</p>
</div>
<div class="flex flex-col items-center text-center group">
<div class="w-24 h-24 bg-cover bg-center rounded-lg transition-transform duration-300 group-hover:scale-105" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAJxdBOxJHvUhbgHH3qJP6G72xg1E98OaLhRKO99GrTMdYS3gHEhT_UOMI_6G1NJxHEmWIdAPSicmMsMJP8KKHbEIk7S7YGovfvBcxSsz6O5YZOdRBQ4aRtmZ42rN2ILHiNqD6MehZs8cR4zhuQ5CLvItYyAr5CL2NGdoXmBpJztbeq5dvX-ce6uFzVb7sbFrEB1grAnrcghspmOHwkByFUl1g_WfrAYndWpumv1VAPC68U2hSp3BYLG9GeezoZgBCN45r2bQlkxTg");'></div>
<p class="mt-2 text-sm font-semibold text-gray-700 dark:text-gray-300">Pionero del Saber</p>
</div>
<div class="flex flex-col items-center text-center group">
<div class="w-24 h-24 bg-cover bg-center rounded-lg transition-transform duration-300 group-hover:scale-105" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAz7mP5E9kzTu2e2qVXLK9ZX-rrClnxA1--rslJgfHLFxR7eTQDzJPLbbPqyW3o789NdIAsnMe97wq1gJny1bJG_6X0gYar0r4YKlSMwvJrQ3WL2RHl2HQGtpUnqDWEjXIBSKgAkd2SVlJWdLs5CnoYhe3s5UFeg9I_DyhxQH9tWJTbJjpZM1rVuC210FfvXc5D9IsK9DrZfEkhNd8UVTmi-ULzlIGABp4h-mWlmtCOrtg3RDIMrOlYIyGe6leHMdC_lYusc3PttLM");'></div>
<p class="mt-2 text-sm font-semibold text-gray-700 dark:text-gray-300">Maestro de Apuntes</p>
</div>
</div>
</div>
</div>

<div id="tab-descargas" class="tab-content-profile hidden">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Materiales Descargados</h3>
<div class="space-y-4">
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDXJDyWHZvTf057Tacx_EGd4u64j3rKjdjdfVdzNvVknyqkmDFOi3-ttXnNcYjTwn2XdbrIWwhSyHIEAHC1dL67nYjkhEhjEMI4FLizqIazBDe6cyTFYF49zPE3gQTrNDHGAsPEexVavlI_fJiZMyydbynpG6gw7XmG-1WheBB41lPWsquYxdHBNJDp9oCGFQpE4gDuCRbXXrMP0HCdpkpFeqIVc7nc_LeogZ1EzKMWu-WKdXcCTvVZn2rmH2qNU4Uxg4aBfhJ2jBM");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Examen de Probabilidad y Estad√≠stica</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Descargado hace 3 d√≠as</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.6</span>
</div>
</div>
</div>
<div class="flex gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors" onclick="window.location.href='../vista_previa_del_material/code.html'">
<div class="w-24 h-24 bg-cover bg-center rounded-lg flex-shrink-0" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB3xDVhxaWodbhi5Ag8j60p7fPXFcRx86ZVJBTOQbJ5YmJ5OyHjs7s9vOLRXs9rNxZFQODhBCV0Lsy-zgAk31vyxsZ4yz_1GhK2nASaND08v66jfZ890BZ4JSOHi3liF-uldAYJn_6U1G72LUxgXulMrsCvSBuJO1NQvjVZ0esbWE1CiPv7LwIY3IDMUajLAZSJoPm1SdYlN9ftETSkxK5V_ITGhC3-1KFjTRm_1KV5ZV200RXjgc6IfsGiFegWlNinWJySo07MI7E");'></div>
<div class="flex-1">
<h4 class="font-bold text-gray-900 dark:text-white mb-1">Resumen Qu√≠mica General</h4>
<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Descargado hace 1 semana</p>
<div class="flex items-center gap-2 text-xs">
<span class="flex items-center gap-1 text-amber-500"><span class="material-symbols-outlined text-sm">star</span> 4.3</span>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="tab-calificaciones" class="tab-content-profile hidden">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Mis Calificaciones</h3>
<div class="space-y-4">
<div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h4 class="font-bold text-gray-900 dark:text-white">Apuntes de C√°lculo II</h4>
<div class="flex items-center gap-1 text-amber-500">
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
</div>
</div>
<p class="text-sm text-gray-600 dark:text-gray-400">"Excelente material, muy completo y bien explicado."</p>
<p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Hace 1 semana</p>
</div>
<div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h4 class="font-bold text-gray-900 dark:text-white">Gu√≠a de F√≠sica I</h4>
<div class="flex items-center gap-1 text-amber-500">
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg">star</span>
<span class="material-symbols-outlined text-lg text-gray-300">star</span>
</div>
</div>
<p class="text-sm text-gray-600 dark:text-gray-400">"Muy √∫til para practicar."</p>
<p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Hace 2 semanas</p>
</div>
</div>
</div>
</div>

</div>
<div class="space-y-8">
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Reputaci√≥n</h3>
<div class="flex items-center gap-4">
<span class="material-symbols-outlined text-4xl text-primary">military_tech</span>
<div>
<p data-stat="reputation" class="text-3xl font-bold text-primary">1250</p>
<p class="text-sm text-gray-500 dark:text-gray-400">Puntos de reputaci√≥n</p>
</div>
</div>
<div class="mt-4 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
<div class="bg-primary h-2.5 rounded-full transition-all duration-500" style="width: 75%"></div>
</div>
<p data-next-level class="text-xs text-gray-500 dark:text-gray-400 mt-2">Pr√≥ximo nivel: Erudito (1500 pts)</p>
</div>
<div class="bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6">
<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Estad√≠sticas</h3>
<ul class="space-y-3">
<li class="flex justify-between items-center text-sm">
<span class="text-gray-600 dark:text-gray-300">Materiales subidos</span>
<span data-stat="materials" class="font-bold text-gray-900 dark:text-white">42</span>
</li>
<li class="flex justify-between items-center text-sm">
<span class="text-gray-600 dark:text-gray-300">Descargas totales</span>
<span data-stat="downloads" class="font-bold text-gray-900 dark:text-white">1,890</span>
</li>
<li class="flex justify-between items-center text-sm">
<span class="text-gray-600 dark:text-gray-300">Calificaci√≥n promedio</span>
<span class="font-bold text-primary flex items-center">
<span data-stat="rating">4.8</span>
<span class="material-symbols-outlined text-base ml-1">star</span>
</span>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</main>
</div>
<script>
    // Notificaciones dropdown
    const notificationButton = document.querySelector('.notification-button');
    const notificationDropdown = document.querySelector('.notification-dropdown');

    notificationButton.addEventListener('click', (e) => {
        e.stopPropagation();
        notificationDropdown.classList.toggle('hidden');
    });

    document.addEventListener('click', (e) => {
        if (!notificationDropdown.classList.contains('hidden') && !e.target.closest('.notification-dropdown')) {
            notificationDropdown.classList.add('hidden');
        }
    });

    // Men√∫ m√≥vil
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    }

    // Cerrar men√∫ al hacer clic fuera
    document.addEventListener('click', (e) => {
        const menu = document.getElementById('mobile-menu');
        const button = e.target.closest('button[onclick="toggleMobileMenu()"]');
        if (!button && !menu.contains(e.target)) {
            menu.classList.add('hidden');
        }
    });

    const profileTabs = document.querySelectorAll('.profile-tab');
    const profileContents = document.querySelectorAll('.tab-content-profile');

    profileTabs.forEach(button => {
        button.addEventListener('click', () => {
            const targetTab = button.getAttribute('data-tab');
            
            profileTabs.forEach(btn => {
                btn.classList.remove('active', 'border-primary', 'text-primary');
                btn.classList.add('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            });
            
            button.classList.add('active', 'border-primary', 'text-primary');
            button.classList.remove('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            
            profileContents.forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById('tab-' + targetTab).classList.remove('hidden');
        });
    });

    // üõ°Ô∏è Sistema de Moderaci√≥n - Mostrar bot√≥n solo a admins/moderadores
    setTimeout(() => {
        console.log('üîç Verificando permisos de moderaci√≥n...');
        
        if (!window.Kampus) {
            console.warn('‚ö†Ô∏è Sistema Kampus no disponible a√∫n');
            return;
        }

        // ==========================================
        // NOTA: El bot√≥n de moderaci√≥n y badge de rol
        // ahora se gestionan autom√°ticamente por header-sync.js
        // ==========================================
    }, 500);

    // Modal de Edici√≥n de Perfil
    function openEditProfileModal() {
      const profile = window.ProfileManager?.profile;
      if (!profile) {
        console.error('No se pudo cargar el perfil');
        return;
      }

      // Crear modal de edici√≥n
      const modalHTML = `
        <div id="editProfileModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4" onclick="if(event.target === this) closeEditProfileModal()">
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6">
              <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900 dark:text-white">Editar Perfil</h3>
                <button onclick="closeEditProfileModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                  <span class="material-symbols-outlined text-3xl">close</span>
                </button>
              </div>
              
              <form id="editProfileForm" class="space-y-6">
                <!-- Avatar -->
                <div class="text-center">
                  <div class="relative inline-block">
                    <div id="modalAvatar" class="w-32 h-32 rounded-full bg-cover bg-center border-4 border-gray-200 dark:border-gray-700" style="background-image: url('${profile.avatar}')"></div>
                    <button type="button" onclick="showAvatarOptions()" class="absolute bottom-0 right-0 bg-primary hover:bg-primary/90 text-white rounded-full p-2 shadow-lg">
                      <span class="material-symbols-outlined text-xl">photo_camera</span>
                    </button>
                  </div>
                  <p class="text-sm text-gray-500 dark:text-gray-400 mt-2">Click en la c√°mara para cambiar tu avatar</p>
                </div>

                <!-- Opciones de Avatar (oculto inicialmente) -->
                <div id="avatarOptions" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Selecciona un avatar</label>
                  <div class="grid grid-cols-5 gap-3">
                    ${[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(num => `
                      <button type="button" onclick="selectAvatar('https://i.pravatar.cc/150?img=${num}')" class="w-full aspect-square rounded-full bg-cover bg-center border-2 border-gray-300 dark:border-gray-600 hover:border-primary hover:scale-110 transition-all" style="background-image: url('https://i.pravatar.cc/150?img=${num}')"></button>
                    `).join('')}
                  </div>
                </div>
                
                <!-- Nombre -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Nombre Completo</label>
                  <input type="text" id="editName" value="${profile.name}" class="w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white">
                </div>
                
                <!-- Carrera -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Carrera</label>
                  <input type="text" id="editCareer" value="${profile.career}" class="w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white">
                </div>
                
                <!-- Universidad -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Universidad</label>
                  <input type="text" id="editUniversity" value="${profile.university}" class="w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white">
                </div>
                
                <!-- Biograf√≠a -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Biograf√≠a</label>
                  <textarea id="editBio" rows="3" class="w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white">${profile.bio || ''}</textarea>
                </div>
                
                <!-- Redes Sociales -->
                <div class="space-y-3">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Redes Sociales</label>
                  
                  <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-blue-600">link</span>
                    <input type="url" id="editLinkedin" placeholder="LinkedIn URL" value="${profile.social?.linkedin || ''}" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-sm">
                  </div>
                  
                  <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-gray-700 dark:text-gray-300">code</span>
                    <input type="url" id="editGithub" placeholder="GitHub URL" value="${profile.social?.github || ''}" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-sm">
                  </div>
                  
                  <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-blue-400">tag</span>
                    <input type="url" id="editTwitter" placeholder="Twitter URL" value="${profile.social?.twitter || ''}" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-sm">
                  </div>
                  
                  <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-green-600">language</span>
                    <input type="url" id="editWebsite" placeholder="Website URL" value="${profile.social?.website || ''}" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white text-sm">
                  </div>
                </div>
                
                <!-- Botones -->
                <div class="flex gap-3 pt-4">
                  <button type="button" onclick="saveProfileChanges()" class="flex-1 bg-primary hover:bg-primary/90 text-white font-semibold py-3 rounded-lg transition">
                    Guardar Cambios
                  </button>
                  <button type="button" onclick="closeEditProfileModal()" class="px-8 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-semibold py-3 rounded-lg transition">
                    Cancelar
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      `;

      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }

    function closeEditProfileModal() {
      const modal = document.getElementById('editProfileModal');
      if (modal) modal.remove();
    }

    function showAvatarOptions() {
      const avatarOptions = document.getElementById('avatarOptions');
      avatarOptions.classList.toggle('hidden');
    }

    function selectAvatar(avatarUrl) {
      const modalAvatar = document.getElementById('modalAvatar');
      modalAvatar.style.backgroundImage = `url('${avatarUrl}')`;
      modalAvatar.dataset.newAvatar = avatarUrl;
      
      // Ocultar opciones despu√©s de seleccionar
      document.getElementById('avatarOptions').classList.add('hidden');
    }

    function saveProfileChanges() {
      if (!window.ProfileManager) return;

      const modalAvatar = document.getElementById('modalAvatar');
      const newAvatar = modalAvatar.dataset.newAvatar;

      const updatedProfile = {
        name: document.getElementById('editName').value,
        career: document.getElementById('editCareer').value,
        university: document.getElementById('editUniversity').value,
        bio: document.getElementById('editBio').value,
        social: {
          linkedin: document.getElementById('editLinkedin').value,
          github: document.getElementById('editGithub').value,
          twitter: document.getElementById('editTwitter').value,
          website: document.getElementById('editWebsite').value
        }
      };

      // Si se seleccion√≥ un nuevo avatar, actualizarlo
      if (newAvatar) {
        updatedProfile.avatar = newAvatar;
      }

      // Actualizar perfil
      window.ProfileManager.updateProfile(updatedProfile);

      // Reinicializar la UI con los nuevos datos
      initializeProfile();

      // Cerrar modal
      closeEditProfileModal();

      // Mostrar confirmaci√≥n
      const confirmModal = `
        <div id="confirmModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 text-center max-w-sm">
            <div class="w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
              <span class="material-symbols-outlined text-4xl text-green-600">check_circle</span>
            </div>
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">¬°Perfil Actualizado!</h3>
            <p class="text-gray-600 dark:text-gray-400 mb-6">Tus cambios han sido guardados exitosamente.</p>
            <button onclick="document.getElementById('confirmModal').remove()" class="w-full bg-primary hover:bg-primary/90 text-white font-semibold py-2.5 rounded-lg transition">
              Entendido
            </button>
          </div>
        </div>
      `;
      
      document.body.insertAdjacentHTML('beforeend', confirmModal);
      setTimeout(() => {
        const modal = document.getElementById('confirmModal');
        if (modal) modal.remove();
      }, 3000);
    }
</script>

<!-- Scripts de utilidades del sistema -->
<script src="../js/toast.js"></script>
<script src="../js/analytics.js"></script>
<script src="../js/download-manager.js"></script>
<script src="../js/profile-manager.js"></script>
<script src="../js/profile-ui.js"></script>

<!-- Sistema Premium -->
<script src="../js/premium-check.js"></script>

<script>
// üé® Inicializar perfil - ejecutar DESPU√âS de que todos los scripts carguen
(function() {
  // Ejecutar inmediatamente si DOMContentLoaded ya pas√≥, o esperar a que ocurra
  function initWhenReady() {
    console.log('üöÄ Iniciando sistema de perfil...');
    console.log('üîç Debug inicial:', {
      ProfileManager: typeof window.ProfileManager,
      profile: typeof window.ProfileManager?.profile,
      profileKeys: window.ProfileManager?.profile ? Object.keys(window.ProfileManager.profile) : 'N/A'
    });
    
    // Verificaci√≥n simple y directa
    if (window.ProfileManager && window.ProfileManager.profile) {
      console.log('‚úÖ ProfileManager detectado, inicializando UI...');
      try {
        initializeProfile();
      } catch (error) {
        console.error('‚ùå Error al inicializar perfil:', error);
        console.log('üîç Estado de ProfileManager:', window.ProfileManager);
        console.log('üîç Estado de profile:', window.ProfileManager?.profile);
      }
    } else {
      console.error('‚ùå ProfileManager no disponible');
      console.log('Debug detallado:', {
        windowPM: window.ProfileManager,
        profile: window.ProfileManager?.profile
      });
    }
  }
  
  // Si el DOM ya est√° listo, ejecutar ahora. Si no, esperar.
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initWhenReady);
  } else {
    // DOM ya cargado, ejecutar en el siguiente tick
    setTimeout(initWhenReady, 0);
  }
})();

function initializeProfile() {
  // Validaci√≥n de seguridad - USAR window.ProfileManager
  if (!window.ProfileManager || !window.ProfileManager.profile) {
    console.error('‚ùå Error: ProfileManager o profile no disponible');
    console.log('Debug:', {
      ProfileManager: typeof window.ProfileManager,
      profile: typeof window.ProfileManager?.profile,
      profileContent: window.ProfileManager?.profile
    });
    return;
  }
  
  const profile = window.ProfileManager.profile;
  
  console.log('üé® Inicializando perfil de:', profile.name);
  
  // Actualizar informaci√≥n del perfil
  const nameEl = document.querySelector('[data-profile-name]');
  const avatarEl = document.querySelector('[data-profile-avatar]');
  const headerAvatarEl = document.querySelector('[data-header-avatar]');
  
  // Actualizar elementos del banner (m√≥vil)
  const bannerCareerEl = document.querySelector('[data-banner-career]');
  const bannerUniversityEl = document.querySelector('[data-banner-university]');
  
  // Actualizar badges de desktop
  const careerEl = document.querySelector('[data-profile-career]');
  const universityEl = document.querySelector('[data-profile-university]');
  
  if (nameEl) nameEl.textContent = profile.name;
  if (avatarEl) avatarEl.style.backgroundImage = `url('${profile.avatar}')`;
  
  // Actualizar tambi√©n el avatar del header
  if (headerAvatarEl) headerAvatarEl.style.backgroundImage = `url('${profile.avatar}')`;
  
  // Actualizar elementos del banner (m√≥vil)
  if (bannerCareerEl) bannerCareerEl.textContent = profile.career;
  if (bannerUniversityEl) bannerUniversityEl.textContent = profile.university;
  
  // Actualizar badges de desktop
  if (careerEl) careerEl.textContent = profile.career;
  if (universityEl) universityEl.textContent = profile.university;
  
  // Mostrar biograf√≠a si existe
  const bioEl = document.getElementById('profile-bio');
  if (bioEl && profile.bio) {
    bioEl.innerHTML = `<p>"${profile.bio}"</p>`;
  }
  
  // Mostrar redes sociales
  const socialEl = document.getElementById('profile-social');
  if (socialEl && profile.social) {
    const social = [];
    
    if (profile.social.linkedin) {
      social.push(`<a href="${profile.social.linkedin}" target="_blank" class="w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center hover:scale-110 transition-transform" title="LinkedIn">
        <svg class="w-4 h-4 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
      </a>`);
    }
    
    if (profile.social.github) {
      social.push(`<a href="${profile.social.github}" target="_blank" class="w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center hover:scale-110 transition-transform" title="GitHub">
        <svg class="w-4 h-4 text-gray-700 dark:text-gray-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>`);
    }
    
    if (profile.social.twitter) {
      social.push(`<a href="${profile.social.twitter}" target="_blank" class="w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center hover:scale-110 transition-transform" title="Twitter">
        <svg class="w-4 h-4 text-blue-400" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
      </a>`);
    }
    
    if (profile.social.website) {
      social.push(`<a href="${profile.social.website}" target="_blank" class="w-8 h-8 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center hover:scale-110 transition-transform" title="Website">
        <svg class="w-4 h-4 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg>
      </a>`);
    }
    
    if (social.length > 0) {
      socialEl.innerHTML = social.join('');
    }
  }
  
  // Actualizar estad√≠sticas
  updateProfileStats();
  
  // Actualizar nivel de reputaci√≥n
  updateReputationLevel();
  
  console.log('‚úÖ Perfil inicializado:', profile.name);
}

function updateProfileStats() {
  if (!window.ProfileManager || !window.ProfileManager.profile) return;
  
  const stats = window.ProfileManager.profile.stats;
  
  // Actualizar n√∫meros en la UI (si existen los elementos)
  const statsElements = {
    reputation: document.querySelector('[data-stat="reputation"]'),
    materialsUploaded: document.querySelector('[data-stat="materials"]'),
    totalDownloads: document.querySelector('[data-stat="downloads"]'),
    averageRating: document.querySelector('[data-stat="rating"]')
  };
  
  if (statsElements.reputation) {
    statsElements.reputation.textContent = stats.reputation.toLocaleString();
  }
  if (statsElements.materialsUploaded) {
    statsElements.materialsUploaded.textContent = stats.materialsUploaded;
  }
  if (statsElements.totalDownloads) {
    statsElements.totalDownloads.textContent = stats.totalDownloads.toLocaleString();
  }
  if (statsElements.averageRating) {
    statsElements.averageRating.textContent = stats.averageRating.toFixed(1);
  }
}

function updateReputationLevel() {
  if (!window.ProfileManager || !window.ProfileManager.profile) return;
  
  const level = window.ProfileManager.getReputationLevel();
  const stats = window.ProfileManager.profile.stats;
  
  // Actualizar barra de progreso
  const progressBar = document.querySelector('.bg-primary.h-2\\.5');
  if (progressBar && level.nextAt) {
    const progress = ((stats.reputation % level.nextAt) / level.nextAt) * 100;
    progressBar.style.width = `${progress}%`;
  }
  
  // Actualizar texto de pr√≥ximo nivel
  const nextLevelText = document.querySelector('[data-next-level]');
  if (nextLevelText && level.next) {
    nextLevelText.textContent = `Pr√≥ximo nivel: ${level.next} (${level.nextAt} pts)`;
  }
}
</script>

</body></html>